# QA Readiness Answers

1. **Business scope and primary roles.** The system is a native Windows Telegram auction for buying and selling USDT with manual or automatic award, staged fiat and crypto settlement, full traceability, and dispute handling (dastoor.txt:11). Customers create and manage RFQs, approve winners, upload payment evidence, and respond to disputes (dastoor.txt:14). Providers receive RFQs, submit quotes, settle on time, and supply TxID or receipt evidence (dastoor.txt:15). Admins manage providers and policies, choose winners or enable auto award, monitor SLAs, resolve disputes, and produce reports (dastoor.txt:16).

2. **Stage 1 tangible outputs and storage locations.** Stage 1 requires the RTM and the signed stakeholder sign-off (marahel_utf8.txt:21, marahel_utf8.txt:25). The completion checklist confirms RTM at `artefacts/RTM_v1.1.csv` and the sign-off PDF at `artefacts/stakeholder_signoff_stage1.pdf` (artefacts/stage_completion_checklist.md:14). Supporting manual sampling evidence sits in `artefacts/test_reports/M01_manual_sampling.md` as referenced by the Stage 1 test summary (artefacts/test_reports/M01_test_summary.md:8).

3. **Assumption AL-001 risk and mitigation.** AL-001 tracks the lack of offline pytest tooling on the restricted host (artefacts/assumptions_log.md:4). The risk is inability to gather coverage because `pytest-cov` cannot install (artefacts/test_reports/M01_test_summary.md:5). Mitigation is bundling packages during Stage 8 Zero-to-Dev work and rerunning the suites, which is listed in the Stage 1 follow-up actions and the stack ADR (artefacts/stage_completion_checklist.md:22, artefacts/ADR/ADR-Stack-Selection.md:21).

4. **Stage 2 tech stack selections.** The decision log locks Python 3.11.2, FastAPI 0.110, python-telegram-bot 20.x, PostgreSQL 15, RabbitMQ 3.13 Windows Service, SQLAlchemy 2.0 with Alembic 1.13, structlog 23.2.0, pytest 8.0.0 with pytest-cov 4.1.0, python-dotenv 1.0.0, and Windows-native deployment scripts (artefacts/TechStack_Decisions.md:6, artefacts/TechStack_Decisions.md:7, artefacts/TechStack_Decisions.md:8, artefacts/TechStack_Decisions.md:9, artefacts/TechStack_Decisions.md:10, artefacts/TechStack_Decisions.md:11, artefacts/TechStack_Decisions.md:12, artefacts/TechStack_Decisions.md:13, artefacts/TechStack_Decisions.md:14, artefacts/TechStack_Decisions.md:15). Each entry includes reasoning tied to RTM IDs.

5. **POC status for Stage 2.** The stack document links both proof-of-concept logs (artefacts/TechStack_Decisions.md:43, artefacts/TechStack_Decisions.md:44). `artefacts/test_reports/M02_db_poc.log` confirms PostgreSQL connectivity as `POC_SUCCESS` with version details (artefacts/test_reports/M02_db_poc.log:1). `artefacts/test_reports/M02_telegram_poc.log` records a successful sandbox message with timestamp and message ID (artefacts/test_reports/M02_telegram_poc.log:1).

6. **Stage 3 C4 diagram coverage.** Stage guidance demands three core scenarios with success and failure paths (marahel_utf8.txt:60, marahel_utf8.txt:63). The walkthrough verifies RFQ to settlement (SCN-01), sell RFQ with configurable settlement order (SCN-02), and dispute resolution (SCN-03) along with failure branches such as no quotes, SLA breaches, and evidence gaps (artefacts/test_reports/M03_walkthrough.md:9, artefacts/test_reports/M03_walkthrough.md:14, artefacts/test_reports/M03_walkthrough.md:18).

7. **Scenario mapping link to RTM and diagrams.** `artefacts/scenario_mapping_stage3.xlsx` connects each scenario ID to RTM requirement IDs, primary and failure flows, and specific C4 diagrams, ensuring traceability from requirements to diagrams (artefacts/test_reports/M03_walkthrough.md:10).

8. **Stage 4 domain entities and relationships.** The glossary defines Customer, Provider, AdminUser, RFQ, and Quote with key fields and dominant relationships: Customers own RFQs and can file disputes (artefacts/domain_glossary.md:5). Providers hold scores, collateral, quotes, and dispute roles (artefacts/domain_glossary.md:6). AdminUsers link to dispute actions and config versions (artefacts/domain_glossary.md:7). RFQs connect customers to quotes and awards (artefacts/domain_glossary.md:8). Quotes belong to providers and RFQs and feed settlement legs (artefacts/domain_glossary.md:9).

9. **Change-history policy in the glossary.** Every entity must include `created_at`, `updated_at`, `created_by`, and `updated_by` to retain change history (artefacts/domain_glossary.md:21).

10. **Database schema tables, indexes, and GIN usage.** The schema creates 15 tables from `customers` through `provider_score_snapshots` (db/schema/database_schema_v1.sql:6, db/schema/database_schema_v1.sql:201). Migration testing recorded 68 indexes after deployment (artefacts/test_reports/M05_test_migration.log:1). The two GIN indexes are `idx_evidence_metadata_gin` on evidence metadata for flexible JSON search and `idx_config_versions_payload_gin` on configuration payloads to accelerate schema validation queries (db/schema/database_schema_v1.sql:255, db/schema/database_schema_v1.sql:274).

11. **Schema performance query results.** Stage 5 benchmarking measured `quotes_for_open_rfq` at 1.025 ms, `disputes_lookup` at 1.083 ms, and `notification_queue` at 0.115 ms, each within the 50 ms target (artefacts/SchemaPerformanceReport.md:7, artefacts/SchemaPerformanceReport.md:8, artefacts/SchemaPerformanceReport.md:25, artefacts/SchemaPerformanceReport.md:26, artefacts/SchemaPerformanceReport.md:39, artefacts/SchemaPerformanceReport.md:40).

12. **Settlement API routes and EvidenceProof schema.** The OpenAPI file defines endpoints for RFQ list/create, quote submission, manual award, settlement retrieval, settlement evidence, dispute list/create, and dispute action logging (api/settlement_api.yaml:22, api/settlement_api.yaml:82, api/settlement_api.yaml:103, api/settlement_api.yaml:118, api/settlement_api.yaml:147, api/settlement_api.yaml:164, api/settlement_api.yaml:181). `EvidenceProof` requires `hash`, `issuer`, `payer`, `payee`, `amounts` (with fiat and usdt), `txId`, `network`, and `claimedConfirmations`, plus optional metadata for extensibility (api/settlement_api.yaml:376, api/settlement_api.yaml:378, api/settlement_api.yaml:382, api/settlement_api.yaml:385, api/settlement_api.yaml:389, api/settlement_api.yaml:393, api/settlement_api.yaml:395, api/settlement_api.yaml:399, api/settlement_api.yaml:401, api/settlement_api.yaml:402, api/settlement_api.yaml:404).

13. **Telegram webhook security mechanisms.** The AsyncAPI specification enforces an `X-Signature-SHA256` HMAC header, requires an `X-Idempotency-Key` header for deduplication, and documents the 100 requests per minute rate cap per bot token (api/telegram_webhook.yaml:7, api/telegram_webhook.yaml:14, api/telegram_webhook.yaml:37, api/telegram_webhook.yaml:40).

14. **Workflow statecharts and escalation path.** The statechart defines settlement transitions `Pending -> InProgress -> Settled | Partially_Disputed | Fully_Disputed | Expired`, with triggers for evidence acceptance, missing evidence, and multi-leg failures; disputes move `Open -> UnderReview -> Resolved | EscalatedToAdmin | Reopened` and escalations route to the Ops admin queue when retry limits are exceeded (artefacts/Workflow_Statecharts.pdf, artefacts/test_reports/M07_workflow_walkthrough.md:10, artefacts/test_reports/M07_workflow_walkthrough.md:18).

15. **Zero-to-Dev script steps and runtime evidence.** The script checks Python, validates the PostgreSQL CLI, builds or updates the virtual environment, inspects `config/test.env`, ensures the database, applies migrations, runs migration and performance tests, rolls back and reapplies the schema, and leaves a smoke-test placeholder (scripts/setup/zero_to_dev.ps1:40, scripts/setup/zero_to_dev.ps1:45, scripts/setup/zero_to_dev.ps1:58, scripts/setup/zero_to_dev.ps1:68, scripts/setup/zero_to_dev.ps1:87, scripts/setup/zero_to_dev.ps1:96, scripts/setup/zero_to_dev.ps1:102, scripts/setup/zero_to_dev.ps1:106, scripts/setup/zero_to_dev.ps1:110, scripts/setup/zero_to_dev.ps1:115). Execution logs show a start at 04:40:34 and a duration of 1.38 minutes (artefacts/zerotodev_execution.log:19, artefacts/zerotodev_execution.log:54).

16. **Zero-to-Dev prerequisites.** The guide states the host must run Windows 10 or 11 (or Server 2019), have PowerShell 5.1+, Python 3.11 with pip, PostgreSQL 16 running, RabbitMQ installed, and a restricted service account ready (artefacts/ZeroToDev_Guide.ps1.md:6, artefacts/ZeroToDev_Guide.ps1.md:7, artefacts/ZeroToDev_Guide.ps1.md:8, artefacts/ZeroToDev_Guide.ps1.md:9, artefacts/ZeroToDev_Guide.ps1.md:10).

17. **Secrets management policy and required `USDT_` entries.** Secrets must never live in Git and must be stored in environment variables or Windows Credential Manager using the `USDT_` prefix (artefacts/Secrets_Management.md:4, artefacts/Secrets_Management.md:7). Named entries include `USDT_DATABASE_URL`, `USDT_RABBITMQ_URL`, and `USDT_TELEGRAM_BOT_TOKEN`, with the pattern `USDT_<SECRET_NAME>` for additional credentials (artefacts/Secrets_Management.md:11, artefacts/Secrets_Management.md:12, artefacts/Secrets_Management.md:13, artefacts/Secrets_Management.md:14).

18. **Stage 9 customer module structure and router changes.** The Stage 9 skeleton introduces `core/`, `config/`, `services/`, and `customer/` packages (src/backend/README.md:9). `core/app.py` adds the customer router to the FastAPI app (src/backend/core/app.py:12). The router exposes `/customer/register` with service injection (src/backend/customer/router.py:11). The service module loads verification policies from `artefacts/Verification_Policies.json`, masks card numbers, enforces tier limits, and stores registrations in memory for Stage 10 (src/backend/customer/service.py:19, src/backend/customer/service.py:42, src/backend/customer/service.py:47, src/backend/customer/service.py:57, src/backend/customer/service.py:76).

19. **Customer registration tests and results.** Three pytest cases cover masking and limit enforcement, duplicate idempotency, and rejection of unknown tiers (tests/test_customer_registration.py:19, tests/test_customer_registration.py:46, tests/test_customer_registration.py:70). The Stage 10 report logs the suite as passed and restates the observed behaviours (artefacts/test_reports/M10_customer_tests.md:5, artefacts/test_reports/M10_customer_tests.md:7, artefacts/test_reports/M10_customer_tests.md:9, artefacts/test_reports/M10_customer_tests.md:10).

20. **Outstanding failing tests and mitigation.** Stage 1 test scripts failed because `pytest-cov` was unavailable, the integration script conflicts with the reserved `$Host` variable, and the E2E suite directory is empty (artefacts/test_reports/M01_test_summary.md:5, artefacts/test_reports/M01_test_summary.md:6, artefacts/test_reports/M01_test_summary.md:7). The remediation plan is to package dependencies offline, rename the integration script parameter, and build the E2E suite before Stage 24, all captured in the Stage 1 follow-up section (artefacts/stage_completion_checklist.md:22).

21. **Stage completion checklist items still marked X.** Stage 1 shows the test evidence row as X because scripts failed (artefacts/stage_completion_checklist.md:15). Every stage from M01 through M10 has "Lessons Learned" pending, awaiting consolidated documentation at the end of each phase (artefacts/stage_completion_checklist.md:19, artefacts/stage_completion_checklist.md:41, artefacts/stage_completion_checklist.md:61, artefacts/stage_completion_checklist.md:80, artefacts/stage_completion_checklist.md:99, artefacts/stage_completion_checklist.md:118, artefacts/stage_completion_checklist.md:137, artefacts/stage_completion_checklist.md:156, artefacts/stage_completion_checklist.md:175, artefacts/stage_completion_checklist.md:194).

22. **Readiness actions before Stage 11.** Close AL-001 to AL-003 by preparing offline packages, fixing the integration parameter, and planning the Stage 24 E2E suite (artefacts/assumptions_log.md:4, artefacts/assumptions_log.md:5, artefacts/assumptions_log.md:6). Install RabbitMQ to clear the Zero-to-Dev warning (artefacts/zerotodev_execution.log:26). Backfill pending lessons learned in the stage checklist (artefacts/stage_completion_checklist.md:19).

23. **Stage 11 deliverables and dependencies.** Stage 11 depends on stages 4, 5, 6, and 9, produces the provider backend module and `artefacts/Provider_Eligibility.md`, and must enforce minimum score 70+ with collateral of at least 200,000,000 IRR while logging eligibility filtering on RFQ notifications (marahel_utf8.txt:191, marahel_utf8.txt:192, marahel_utf8.txt:195, marahel_utf8.txt:198, marahel_utf8.txt:201, marahel_utf8.txt:204).

24. **Plan to close open assumptions.** AL-001 through AL-003 will be resolved during Stage 8 (dependency packaging), Stage 8/9 script fixes, and Stage 24 E2E suite delivery. Updates will be recorded in both the assumption log and stage documentation when each action completes (artefacts/assumptions_log.md:4, artefacts/assumptions_log.md:5, artefacts/assumptions_log.md:6, artefacts/test_reports/M01_test_summary.md:10).

25. **Automated testing coverage strategy before Stage 24.** Follow the documented unit, integration, and E2E scripts (`scripts/tests/run_unit_tests.ps1`, `scripts/tests/run_integration_tests.ps1`, `scripts/tests/run_e2e_tests.ps1`) and the execution guide in `tests/README.md` to reach Stage 24 acceptance of at least 80 percent coverage on critical lines and 100 percent critical path execution (tests/README.md:19, tests/README.md:24, tests/README.md:29, marahel_utf8.txt:420, marahel_utf8.txt:422, marahel_utf8.txt:426).
