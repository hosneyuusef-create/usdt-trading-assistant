<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
             xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
             id="Defs-USDT-Workflow" targetNamespace="http://usdt-auction/workflow">
  <process id="USDTOrderProcess" name="USDT Auction Order" isExecutable="false">
    <laneSet id="LaneSet">
      <lane id="LaneCustomer" name="Customer"/>
      <lane id="LaneBot" name="Telegram Bot"/>
      <lane id="LanePlatform" name="Auction Platform"/>
      <lane id="LaneAdmin" name="Admin"/>
    </laneSet>
    <startEvent id="StartRFQ" name="RFQ Submitted">
      <outgoing>Flow1</outgoing>
    </startEvent>
    <task id="TaskNotifyProviders" name="Notify Providers"/>
    <exclusiveGateway id="GatewayQuote" name="Quotes Received?"/>
    <task id="TaskNoQuote" name="No quote -> Cancel"/>
    <intermediateCatchEvent id="EventQuote" name="Quote Received"/>
    <task id="TaskAward" name="Award Quote"/>
    <exclusiveGateway id="GatewayPartialFill" name="Partial Fill?"/>
    <task id="TaskReallocate" name="Reallocate Slice"/>
    <task id="TaskSettlement" name="Execute Settlement"/>
    <exclusiveGateway id="GatewaySettlementStatus" name="Settlement Status"/>
    <task id="TaskDispute" name="Open Dispute"/>
    <task id="TaskResolveDispute" name="Admin Resolve"/>
    <endEvent id="EndSettled" name="Settled"/>
    <endEvent id="EndCancelled" name="Cancelled"/>
    <sequenceFlow id="Flow1" sourceRef="StartRFQ" targetRef="TaskNotifyProviders"/>
    <sequenceFlow id="Flow2" sourceRef="TaskNotifyProviders" targetRef="GatewayQuote"/>
    <sequenceFlow id="Flow3" sourceRef="GatewayQuote" targetRef="TaskNoQuote">
      <conditionExpression xsi:type="tFormalExpression">noQuote</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow4" sourceRef="TaskNoQuote" targetRef="EndCancelled"/>
    <sequenceFlow id="Flow5" sourceRef="GatewayQuote" targetRef="EventQuote">
      <conditionExpression xsi:type="tFormalExpression">hasQuote</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow6" sourceRef="EventQuote" targetRef="TaskAward"/>
    <sequenceFlow id="Flow7" sourceRef="TaskAward" targetRef="GatewayPartialFill"/>
    <sequenceFlow id="Flow8" sourceRef="GatewayPartialFill" targetRef="TaskReallocate">
      <conditionExpression xsi:type="tFormalExpression">partialFill</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow9" sourceRef="TaskReallocate" targetRef="TaskAward"/>
    <sequenceFlow id="Flow10" sourceRef="GatewayPartialFill" targetRef="TaskSettlement">
      <conditionExpression xsi:type="tFormalExpression">completeFill</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow11" sourceRef="TaskSettlement" targetRef="GatewaySettlementStatus"/>
    <sequenceFlow id="Flow12" sourceRef="GatewaySettlementStatus" targetRef="EndSettled">
      <conditionExpression xsi:type="tFormalExpression">settled</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow13" sourceRef="GatewaySettlementStatus" targetRef="TaskDispute">
      <conditionExpression xsi:type="tFormalExpression">breach</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow14" sourceRef="TaskDispute" targetRef="TaskResolveDispute"/>
    <sequenceFlow id="Flow15" sourceRef="TaskResolveDispute" targetRef="EndSettled"/>
  </process>
</definitions>
